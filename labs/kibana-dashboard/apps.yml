services:

  web:
    image: httpd:2.4-alpine
    ports:
      - 8088:80
    user: root # access to write in /data folder
    volumes:
      - ./config/httpd.conf:/usr/local/apache2/conf/httpd.conf
      - ./data:/logs
    networks: 
      - web

  fulfilment-processor:
    image: courselabs/obsfun-fulfilment-processor
    volumes:
      - ./config/override.json:/app/config/override.json
      - ./data:/app/logs
    networks: 
      - fulfilment
      
  fortio:
    image: fortio/fortio:1.17.0
    command: load -c 32 -qps 25 -t 30s http://web
    depends_on:
      - web
    restart: unless-stopped
    networks:
      - web

networks: 
  web:
  fulfilment:
